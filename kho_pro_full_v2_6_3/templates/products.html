{% extends 'base.html' %}
{% block content %}

<style>
  /* cƒÉn l·∫°i h√†ng c√¥ng c·ª• */
  .toolbar { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
  .toolbar .spacer { flex:1; }
  .toolbar .right { display:flex; gap:8px; }
  /* c·ªôt h√†nh ƒë·ªông trong b·∫£ng */
  .row-actions { display:flex; gap:8px; justify-content:flex-start; }
  .row-actions .btn { min-width:64px; text-align:center; } /* S·ª≠a & X√≥a ngang nhau */
</style>

<div class="card">
  <h2 class="card__title">üì¶ S·∫£n ph·∫©m</h2>

  <!-- Thanh c√¥ng c·ª• -->
  <form method="get" class="toolbar">
    <input class="input" type="text" name="q" value="{{ q or '' }}" placeholder="T√¨m theo m√£ / t√™n‚Ä¶">
    <select class="input" name="kho" style="max-width:220px;">
      <option value="ALL" {{ 'selected' if selected_kho=='ALL' else '' }}>T·∫•t c·∫£ kho</option>
      {% for k in khos %}
        <option value="{{ k.id_kho }}" {{ 'selected' if selected_kho==k.id_kho else '' }}>
          {{ k.id_kho }} - {{ k.ten_kho }}
        </option>
      {% endfor %}
    </select>
    <button class="btn small">T√¨m</button>

    <div class="spacer"></div>

    <!-- Nh√≥m n√∫t b√™n ph·∫£i: X√≥a l·ªçc + Th√™m -->
    <div class="right">
      <a class="btn small ghost" href="{{ url_for('products') }}">X√≥a l·ªçc</a>
      <a class="btn small" href="{{ url_for('create_product') }}">Th√™m</a>
    </div>
  </form>

  <div class="table-wrapper" style="margin-top:8px;">
    <table class="table">
      <thead>
        <tr>
          <th>M√£ SP</th>
          <th>T√™n</th>
          <th>Ch·∫•t li·ªáu</th>
          <th>M√†u</th>
          <th style="width:160px;">&nbsp;</th>
        </tr>
      </thead>
      <tbody>
        {% for sp in items %}
        <tr>
          <td>{{ sp.id_san_pham }}</td>
          <td>{{ sp.ten_san_pham }}</td>
          <td>{{ sp.chat_lieu or '' }}</td>
          <td>{{ sp.mau or '' }}</td>
          <td>
            <div class="row-actions">
              <a class="btn small ghost" href="{{ url_for('edit_product', id=sp.id_san_pham) }}">S·ª≠a</a>
              <form method="post" action="{{ url_for('delete_product', id=sp.id_san_pham) }}"
                    onsubmit="return confirm('X√≥a s·∫£n ph·∫©m {{ sp.id_san_pham }}?');">
                <button class="btn small danger" type="submit">X√≥a</button>
              </form>
            </div>
          </td>
        </tr>
        {% endfor %}
        {% if not items %}
        <tr><td colspan="5" style="text-align:center;opacity:.7;">Kh√¥ng c√≥ d·ªØ li·ªáu</td></tr>
        {% endif %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
